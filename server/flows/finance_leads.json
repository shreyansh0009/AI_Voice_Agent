{
  "flowId": "finance_leads_v1",
  "domain": "finance",
  "version": "1.0",
  "description": "Loan inquiry and lead qualification flow",

  "startStep": "greeting",
  "defaultLanguage": "en",

  "agentConfig": {
    "name": "Neha",
    "brand": "QuickLoans",
    "tone": "professional",
    "style": "trustworthy"
  },

  "interruptions": {
    "HELP": "handoff",
    "STOP": "end",
    "SPEAK_TO_HUMAN": "handoff",
    "CANCEL": "end",
    "CHANGE_TOPIC": "handoff"
  },

  "steps": {
    "greeting": {
      "type": "message",
      "text": {
        "en": "Hello! This is {agentName} from {brand}. Are you looking for a loan?",
        "hi": "नमस्ते! मैं {brand} से {agentName} बोल रही हूँ। क्या आप लोन लेना चाहते हैं?"
      },
      "next": "ask_loan_type"
    },

    "ask_loan_type": {
      "type": "choice",
      "field": "loanType",
      "options": ["personal", "home", "car", "business", "education"],
      "text": {
        "en": "What type of loan do you need? Personal, Home, Car, Business, or Education?",
        "hi": "आपको किस प्रकार का लोन चाहिए? पर्सनल, होम, कार, बिजनेस, या एजुकेशन?"
      },
      "next": {
        "personal": "collect_name",
        "home": "collect_name",
        "car": "collect_name",
        "business": "collect_name",
        "education": "collect_name"
      },
      "defaultNext": "collect_name"
    },

    "collect_name": {
      "type": "input",
      "field": "name",
      "validation": "name",
      "maxRetries": 2,
      "text": {
        "en": "May I know your name please?",
        "hi": "कृपया अपना नाम बताइए।"
      },
      "retryText": {
        "en": "I didn't catch that. Could you tell me your name?",
        "hi": "मुझे समझ नहीं आया। कृपया अपना नाम बताइए।"
      },
      "onSuccess": "collect_mobile",
      "onFailure": "handoff"
    },

    "collect_mobile": {
      "type": "input",
      "field": "mobile",
      "validation": "mobile",
      "maxRetries": 2,
      "text": {
        "en": "Thanks {name}! Please share your 10-digit mobile number.",
        "hi": "धन्यवाद {name}! कृपया अपना 10 अंकों का मोबाइल नंबर बताइए।"
      },
      "retryText": {
        "en": "That doesn't seem right. Please share a valid 10-digit mobile number.",
        "hi": "यह सही नहीं लग रहा। कृपया सही 10 अंकों का नंबर बताइए।"
      },
      "onSuccess": "collect_loan_amount",
      "onFailure": "handoff"
    },

    "collect_loan_amount": {
      "type": "choice",
      "field": "loanAmount",
      "options": ["1-5L", "5-10L", "10-25L", "25-50L", "50L+"],
      "text": {
        "en": "What loan amount are you looking for? 1-5 lakhs, 5-10 lakhs, 10-25 lakhs, 25-50 lakhs, or above 50 lakhs?",
        "hi": "आपको कितने का लोन चाहिए? 1-5 लाख, 5-10 लाख, 10-25 लाख, 25-50 लाख, या 50 लाख से ऊपर?"
      },
      "next": {
        "1-5L": "collect_income",
        "5-10L": "collect_income",
        "10-25L": "collect_income",
        "25-50L": "collect_income",
        "50L+": "collect_income"
      },
      "defaultNext": "collect_income"
    },

    "collect_income": {
      "type": "choice",
      "field": "monthlyIncome",
      "options": ["25K-50K", "50K-1L", "1L-2L", "2L+"],
      "text": {
        "en": "What is your monthly income? 25-50 thousand, 50 thousand to 1 lakh, 1-2 lakhs, or above 2 lakhs?",
        "hi": "आपकी मासिक आय क्या है? 25-50 हज़ार, 50 हज़ार से 1 लाख, 1-2 लाख, या 2 लाख से ऊपर?"
      },
      "next": {
        "25K-50K": "collect_employment",
        "50K-1L": "collect_employment",
        "1L-2L": "collect_employment",
        "2L+": "collect_employment"
      },
      "defaultNext": "collect_employment"
    },

    "collect_employment": {
      "type": "choice",
      "field": "employmentType",
      "options": ["salaried", "self_employed", "business_owner"],
      "text": {
        "en": "Are you salaried, self-employed, or a business owner?",
        "hi": "आप नौकरी करते हैं, सेल्फ-एम्प्लॉयड हैं, या बिज़नेस ओनर हैं?"
      },
      "next": {
        "salaried": "confirm_details",
        "self_employed": "confirm_details",
        "business_owner": "confirm_details"
      },
      "defaultNext": "confirm_details"
    },

    "confirm_details": {
      "type": "confirm",
      "text": {
        "en": "Let me confirm: {name}, {mobile}, {loanType} loan of {loanAmount}, income {monthlyIncome}, {employmentType}. Should I process your application?",
        "hi": "मैं कन्फर्म करती हूँ: {name}, {mobile}, {loanAmount} का {loanType} लोन, आय {monthlyIncome}, {employmentType}। क्या मैं आपका आवेदन प्रोसेस करूँ?"
      },
      "confirmNext": "submit_application",
      "denyNext": "collect_name"
    },

    "submit_application": {
      "type": "message",
      "action": "submit_loan_application",
      "text": {
        "en": "Your loan application has been submitted! Our loan officer will contact you within 24 hours. Have a great day!",
        "hi": "आपका लोन आवेदन जमा हो गया है! हमारे लोन ऑफिसर 24 घंटे में संपर्क करेंगे। शुभ दिन!"
      },
      "next": "end"
    },

    "handoff": {
      "type": "handoff",
      "text": {
        "en": "Let me connect you with a loan specialist. Please hold.",
        "hi": "मैं आपको लोन स्पेशलिस्ट से जोड़ती हूँ। कृपया रुकिए।"
      },
      "action": "transfer_to_human",
      "resumeEnabled": true
    },

    "end": {
      "type": "end",
      "text": {
        "en": "Thank you for considering us! Goodbye.",
        "hi": "हमें चुनने के लिए धन्यवाद! अलविदा।"
      },
      "isEnd": true
    }
  }
}
